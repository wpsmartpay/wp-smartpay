(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.React;var r=t.n(e);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(c=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var __=wp.i18n.__,l=wp.blockEditor.InspectorControls,f=wp.components,s=f.SelectControl,p=f.TextControl,y=f.CardBody;const b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(b,t);var e,a,f=function(t){var e=c();return function(){var r,o=u(t);if(e){var a=u(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}(b);function b(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),f.call(this,t)}return e=b,(a=[{key:"render",value:function(){return r().createElement(l,null,r().createElement(y,null,r().createElement(s,{label:__("Shortcode behavior","smartpay"),value:this.props.attributes.behavior,onChange:this.props.onSetBehavior,options:[{value:null,label:__("Select a behavior","smartpay"),disabled:!0},{value:"popup",label:__("Popup","smartpay")},{value:"embedded",label:__("Embedded","smartpay")}]}),"popup"===this.props.attributes.behavior&&r().createElement(p,{label:__("Button label","smartpay"),value:this.props.attributes.label,onChange:this.props.onSetLabel})))}}])&&o(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),b}(r().Component);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(w=function(){return!!t})()}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}wp.i18n.__;var O=wp.components.SelectControl;const g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(a,t);var e,n,o=function(t){var e=w();return function(){var r,n=S(t);if(e){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,t)}return e=a,(n=[{key:"render",value:function(){return r().createElement(O,{className:this.props.class,value:this.props.formId,onChange:this.props.onSetId,options:this.props.formOptions})}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(r().Component);function j(t,e){if(t){if("string"==typeof t)return E(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var P=wp.i18n.__,_=wp.blocks.registerBlockType,R=wp.element,C=R.Fragment,I=R.useEffect,T=R.useState;function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function k(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(B=function(){return!!t})()}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}_("smartpay/form",{title:P("SmartPay Form","smartpay"),description:P("Simple block to show a form","smartpay"),icon:"format-aside",category:"widgets",attributes:{id:{type:"integer",default:0},behavior:{type:"string",default:"popup"},label:{type:"string",default:""}},edit:function(t){var e=t.attributes,r=t.setAttributes;function n(t){r({id:parseInt(t)})}var o,a,i=(o=T([]),a=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(o,a)||j(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1];I(function(){wp.apiFetch({path:"smartpay/v1/forms",headers:{"X-WP-Nonce":smartpay.apiNonce}}).then(function(t){var e;e=null==t?void 0:t.forms.map(function(t){return{value:t.id,label:"(#".concat(t.id,") ").concat(t.title)}}),u(e)}).catch(function(){u([])})},[]);var l=[{value:null,label:P("Select a form","smartpay")}].concat(function(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c));return React.createElement(C,null,React.createElement("div",{className:"smartpay"},React.createElement("div",{className:"container block-editor form card py-4"},React.createElement("div",{className:"card-body text-center"},React.createElement("strong",null,P("SmartPay","smartpay")),React.createElement("div",{className:"d-flex justify-content-center mt-1"},React.createElement("div",{className:"col-md-8"},React.createElement("h5",{className:"text-center mb-3 m-0 font-weight-normal",style:{fontSize:"16px"}},P("Select a Form","smartpay")),React.createElement(g,{formOptions:l,formId:e.id,onSetId:n,className:"form-control form-control-sm mx-auto"})))))),React.createElement(b,{attributes:e,onSetId:n,onSetBehavior:function(t){r({behavior:t})},onSetLabel:function(t){r({label:t})}}))},save:function(t){var e=t.attributes;return'[smartpay_form id="'.concat(e.id,'" behavior="').concat(e.behavior,'" label="').concat(e.label,'"]')}});var L=wp.i18n.__,D=wp.blockEditor.InspectorControls,M=wp.components,z=M.SelectControl,U=M.TextControl,W=M.CardBody;const X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(a,t);var e,n,o=function(t){var e=B();return function(){var r,n=F(t);if(e){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,t)}return e=a,(n=[{key:"render",value:function(){return r().createElement(D,null,r().createElement(W,null,r().createElement(z,{label:L("Shortcode behavior","smartpay"),value:this.props.attributes.behavior,onChange:this.props.onSetBehavior,options:[{value:null,label:L("Select a behavior","smartpay"),disabled:!0},{value:"popup",label:L("Popup","smartpay")},{value:"embedded",label:L("Embedded","smartpay")}]}),"popup"===this.props.attributes.behavior&&r().createElement(U,{label:L("Button label","smartpay"),value:this.props.attributes.label,onChange:this.props.onSetLabel})))}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(r().Component);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function G(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function J(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(J=function(){return!!t})()}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}wp.i18n.__;var Q=wp.components.SelectControl;const V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(a,t);var e,n,o=function(t){var e=J();return function(){var r,n=K(t);if(e){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,t)}return e=a,(n=[{key:"render",value:function(){return r().createElement(Q,{className:this.props.class,value:this.props.productId,onChange:this.props.onSetId,options:this.props.productOptions})}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(r().Component);function Y(t,e){if(t){if("string"==typeof t)return Z(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,e):void 0}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var tt=wp.i18n.__,et=wp.blocks.registerBlockType,rt=wp.element,nt=rt.Fragment,ot=rt.useEffect,at=rt.useState;et("smartpay/product",{title:tt("SmartPay Product","smartpay"),description:tt("Simple block to show a product","smartpay"),icon:"format-aside",category:"widgets",attributes:{id:{type:"integer",default:0},behavior:{type:"string",default:"popup"},label:{type:"string",default:""}},edit:function(t){var e=t.attributes,r=t.setAttributes;function n(t){r({id:parseInt(t)})}var o,a,i=(o=at([]),a=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(o,a)||Y(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1];ot(function(){wp.apiFetch({path:"smartpay/v1/products",headers:{"X-WP-Nonce":smartpay.apiNonce}}).then(function(t){var e;e=null==t?void 0:t.products.map(function(t){return{value:t.id,label:"(#".concat(t.id,") ").concat(t.title)}}),u(e)}).catch(function(){u([])})},[]);var l=[{value:null,label:tt("Select a product","smartpay")}].concat(function(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c));return c?React.createElement(nt,null,React.createElement("div",{className:"smartpay"},React.createElement("div",{className:"container block-editor product card py-4"},React.createElement("div",{className:"card-body text-center"},React.createElement("strong",null,tt("SmartPay","smartpay")),React.createElement("div",{className:"d-flex justify-content-center mt-1"},React.createElement("div",{className:"col-md-8"},React.createElement("h5",{className:"text-center mb-3 m-0 font-weight-normal",style:{fontSize:"16px"}},tt("Select a Product","smartpay")),React.createElement(V,{productOptions:l,productId:e.id,onSetId:n,className:"form-control form-control-sm mx-auto"})))))),React.createElement(X,{attributes:e,onSetId:n,onSetBehavior:function(t){r({behavior:t})},onSetLabel:function(t){r({label:t})}})):React.createElement("h2",null,"Loading")},save:function(t){var e=t.attributes;return'[smartpay_product id="'.concat(e.id,'" behavior="').concat(e.behavior,'" label="').concat(e.label,'"]')}})})();